<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>英単語トレーナー（中1〜中2）</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="wrap">
    <h1>英単語トレーナー</h1>
    <p class="sub">10問テスト（8問4択 + 2問入力） / ミスだけ復習 / モチベUP機能</p>
  </header>

  <main class="wrap">
    <section class="card" id="setup">
      <h2>スタート</h2>

      <div class="row">
        <label class="label">ユーザ名</label>
        <div class="userRow">
          <input id="userName" class="input" placeholder="例：ryosuke" maxlength="20" />
          <button id="saveUserBtn" class="btn">保存</button>
        </div>
      </div>

      <div class="row">
        <label class="label">難易度</label>
        <select id="level"></select>
      </div>

      <div class="row">
        <label class="label">出題方向（4択）</label>
        <select id="mode">
          <option value="en_to_ja">英語 → 日本語</option>
          <option value="ja_to_en">日本語 → 英語</option>
        </select>
      </div>

      <div class="note">
        <div>テストは常に <b>10問</b>（<b>8問=4択</b>、<b>2問=入力（日本語→英語）</b>）</div>
        <div class="muted">※入力問題は英語スペル入力。大小は無視します。</div>
      </div>

      <div class="btnRow">
        <button id="startBtn" class="btn primary">通常テスト（10問）</button>
        <button id="reviewBtn" class="btn">ミスだけ復習</button>
        <button id="resetBtn" class="btn danger">このユーザの記録リセット</button>
      </div>

      <div class="statsGrid">
        <div class="statCard">
          <div class="statLabel">累計 正解数</div>
          <div class="statValue" id="totalOk">0</div>
        </div>
        <div class="statCard">
          <div class="statLabel">累計 回答数</div>
          <div class="statValue" id="totalAns">0</div>
        </div>
        <div class="statCard">
          <div class="statLabel">正答率</div>
          <div class="statValue" id="acc">0%</div>
        </div>
        <div class="statCard">
          <div class="statLabel">ミス単語数</div>
          <div class="statValue" id="missCnt">0</div>
        </div>
        <div class="statCard">
          <div class="statLabel">連続学習日数</div>
          <div class="statValue" id="streak">0</div>
        </div>
        <div class="statCard">
          <div class="statLabel">バッジ</div>
          <div class="statValue" id="badge">-</div>
        </div>
      </div>

      <p class="hint">データは端末内（LocalStorage）にユーザ別保存。サーバ不要。</p>
    </section>

    <section class="card hidden" id="quiz">
      <div class="topline">
        <div id="progress">1 / 10</div>
        <div class="pill" id="qTypePill">4択</div>
        <button id="quitBtn" class="btn small">終了</button>
      </div>

      <h2 id="qText">question</h2>

      <!-- 4択 -->
      <div id="choices" class="choices"></div>

      <!-- 入力 -->
      <div id="typing" class="typing hidden">
        <input id="typeInput" class="input" placeholder="英語で入力（例：apple）" autocomplete="off" />
        <button id="checkBtn" class="btn primary">採点</button>
      </div>

      <div id="feedback" class="feedback"></div>

      <div class="btnRow">
        <button id="nextBtn" class="btn primary" disabled>次へ</button>
      </div>
    </section>

    <section class="card hidden" id="result">
      <h2>結果</h2>
      <p id="resultText"></p>

      <div class="btnRow">
        <button id="backBtn" class="btn primary">トップへ</button>
        <button id="retryMissBtn" class="btn">ミスだけ復習</button>
      </div>

      <details class="missListWrap">
        <summary>ミスした単語を見る</summary>
        <ul id="missList" class="missList"></ul>
      </details>
    </section>
  </main>

  <footer class="wrap footer">
    <small>© Vocab Trainer</small>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
